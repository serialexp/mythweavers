import{createComponent as C}from"solid-js/web";import{createContext as s,useContext as f,createRoot as v,createComponent as d}from"solid-js";import*as r from"virtual:$histoire-generated-global-setup";import*as a from"virtual:$histoire-setup";const m=s(),y=s(),h=t=>{const n=f(m);if(!n)return null;const i={id:t.id??n.fileData.id,title:t.title??n.fileData.fileName,group:t.group,layout:t.layout,icon:t.icon,iconColor:t.iconColor,docsOnly:t.docsOnly,variants:[]};n.addStory(i);const e={story:i,addVariant:l=>{i.variants.push(l)}};return C(y.Provider,{value:e,get children(){return t.children}})},x=t=>{const n=f(y);if(!n)return null;const i={id:t.id??`${n.story.id}-${n.story.variants.length}`,title:t.title??"untitled",icon:t.icon,iconColor:t.iconColor,source:t.source};return n.addVariant(i),null};async function V({file:t,storyData:n}){var c;const e=(await import(/* @vite-ignore */t.moduleId)).default;if(!e)return;const l={addStory:o=>{n.push(o)},fileData:t};let u;if(v(o=>{u=o,d(m.Provider,{value:l,get children(){return d(e,{Hst:{Story:h,Variant:x}})}})}),u(),typeof(r==null?void 0:r.setupSolid)=="function"){const o=r.setupSolid;await o({story:null,variant:null})}if(typeof(a==null?void 0:a.setupSolid)=="function"){const o=a.setupSolid;await o({story:null,variant:null})}n.length>0&&((c=n[0])==null?void 0:c.variants.length)===0&&n[0].variants.push({id:"_default",title:"default"})}export{h as Story,x as Variant,V as run};
